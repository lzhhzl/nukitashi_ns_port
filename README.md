# nukitashi_ns_port
## 简介

个人基于komome(久岛鸥)大佬的移植思路完善的NUKITASHI 1+2 NS移植运行端口，运行程序和nsp壳是基于0100076015D4E000改动制作，Title ID和Icon借用了komome大佬移植制作的nsp壳(因为我不太擅长nsp的ui一类信息的改动所以就暂时先借用了)。

## 如何安装

**注意：本补丁仅供学习分享，并不包含和提供任何原版的游戏文件（Dmm, Steam, DVD ver. 等等)，为了支持正版，请自行前往各平台购买游戏**

#### ***NUKITASHI 1***

**下载链接：**[v1.1 点此下载](https://cloud.189.cn/web/share?code=q2Y7ZjmQJrQv（访问码：jgk2）)

确保你的ns拥有Atmosphere OS，通过任意工具安装0100272018d1a000.nsp，并建立对应的大气层补丁文件夹0100272018D1A000。

确保你已安装steam原版的NUKITASHI 1、并已经打上了Shiravune的v2.0.2的patch(如果不知道如何安装patch可以在[Shiravune官网顶部的 Patches](https://shiravune.com/)中找到)。将游戏文件夹下的NUKITAHI.pfs、NUKITASHI.pfs.000-021文件(共8个pfs文件)全部重命名为类似root.pfs、root.pfs.0xx的样式，将所有重命名后的pfs文件放入ns中刚建好的0100272018D1A000补丁文件夹中，即可开始游玩。

（额外可选补丁）root.pfs.023为部分素材优化修复补丁，可提升游戏运行的稳定性，推荐一块放入使用。

#### ***NUKITASHI 2***

**下载链接：**[v1.1 点此下载](https://cloud.189.cn/web/share?code=q2Y7ZjmQJrQv（访问码：jgk2）)

确保你的ns拥有Atmosphere OS，通过任意工具安装0100262019b1e000.nsp，并建立对应的大气层补丁文件夹0100262019B1E000。

确保你已安装steam原版的NUKITASHI 2、并已经打上了Shiravune的v2.0.1的patch(如果不知道如何安装patch可以在[Shiravune官网顶部的 Patches](https://shiravune.com/)中找到)。将游戏文件夹下的NUKITAHI.pfs、NUKITASHI.pfs.000-013文件(共9个pfs文件)全部重命名为类似root.pfs、root.pfs.0xx的样式，将所有重命名后的pfs文件放入ns中刚建好的0100262019B1E000补丁文件夹中，即可开始游玩。

（额外可选补丁）root.pfs.015为部分素材优化修复补丁，可提升游戏运行的稳定性，推荐一块放入使用。

## 按键

个人临时定义修改了一些按键功能

| 实体按键 | 功能 | 实体按键 | 功能 |
|---|---|---|---|
| 十字键 上 | 调出回想 | 十字键 下 | 确认/故事前进 |
| 十字键 左 | 快速保存 | 十字键 右 | 快速读取 |
| A 键 | 确认/故事前进 | B 键 | 隐藏文本 |
| X 键 | 调出回想 | Y 键 | 显示设置菜单 |
| 肩键 L | 自动模式 | 肩键 R | 跳过文本 |
| 肩键 ZL | 显示保存菜单 | 肩键 ZR | 显示读取菜单 |
| — 按键 | 回到主界面 | + 按键 | 隐藏/显示侧边菜单栏 |
| 屏幕左滑 | 隐藏文本 | 屏幕右滑 | 跳过文本 |
| 屏幕上滑 | 调出回想 | 屏幕下滑 | 显示设置菜单 |
| 两指触控 | 显示设置菜单 | 三指触控 | 略过全文（点击时） |

## 更新记录

#### ***NUKITASHI 1***

- v1.1
  - 调整autocache以修复了部分演出节点崩溃和跳过后调出回想崩溃
  - 去除压缩过的rule图片素材以修复部分演出
- v1.0
	- 用clip的方法替代了maskface蒙版无法正常使用的效果
	- 调整了文字框和回想框文本的文字大小
	- 修复了班长讲解条例的部分语音
- v0.5
	- fg立绘中face所用的cg/frame/maskface蒙版无法正常显示，临时将face立绘缩小至frame-waku框内
	- 用ResourceHanRoundedCN-Bold替代了原先的resourcehanroundedcn-medium以使字体更饱满
	- 新增了部分按键设置。

#### ***NUKITASHI 2***

- v1.1
  - 调整autocache以修复了部分演出节点崩溃和跳过后调出回想崩溃
  - 去除压缩过的rule图片素材以修复部分演出
  - 修复了brand_logo及主界面部分角色语音文件

## 已知问题

1. exit按钮虽然并不能完全退出关闭游戏，但由于在第一次游玩选择语言设置后并不会第一时间保存全局设置，你可以通过进行一次exit来保存游戏当前的全局设置、或是在游戏进行中进行设置更改以保存设置。
2. 目前游戏为了确保尽可能减少崩溃可能、所以部分场景演出仍会有点卡顿，游戏虽然可以快进，但没有测试过在崩溃前的快进极限（我尝试跳过一两章是没出现问题的），推荐经常使用快速保存来保存游玩进度。
3. 目前游戏的移植仍然处于测试阶段，可能会存在部分演出\图像\语音异常，你可以随时提出issue告诉我具体的章节位置和异常情况。

## 致谢

- komome(久岛鸥) 首先尝试制作了硬移植版本

- Sakari 给我提供了很多建议和帮助

- Qruppo，Shiravune 原作开发商与全球版发行商